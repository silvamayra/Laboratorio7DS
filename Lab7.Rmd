---
title: "Laboratorio 7"
author: "Grupo 10"
date: "9/10/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Librerías a utilizar

```{r cars}
#Instalación de paquetes neuevos
#install.packages("twitteR")
#install.packages("ROAuth")
library("twitteR")
library("ROAuth")
library("readr") #Lee los archivos 
library("tm")  #Contiene tranformaciones para el text mining
library("wordcloud")
library(ggplot2) #para gráficos
library(base64enc)
library(openssl)
library(httpuv)
library(httr)
```

# Obteniendo el acceso a Twitter
Para la realización de este laboratorio se decidió utilizar Twitter, para ello se creó una APP desde la página para developers de Twitter, donde se debía de obtener la autorización de Twitter para poder tener una APP de developer. Luego, con la autorización fue posible obtener el API y el token para poder obtener los tweets.

```{r pressure, echo=FALSE}
options(httr_oauth_cache=T)
my.consumer.key <- "MqlOqVvLnJb5o1xGs0o5Hu23Z "
my.consumer.secret <- "eNM9IVRcuRNihtJK9glzMOoebFhxrm25z5IpUjGdffrWAz6nQi"
my.access.token <- "225578097-aDwImEKkCOhVRF6aWwz4KDRsF7VuGi4qn5df7kdk"
my.access.token.secret <- "5dv2mv7v059gIlMxbKfHpvXtqo5WpwrjfJI4lJXXmFi86"
my_oauth <- setup_twitter_oauth(consumer_key = my.consumer.key, consumer_secret = my.consumer.secret, access_token = my.access.token, access_secret = my.access.token.secret)
save(my_oauth, file = "my_oauth.Rdata")
```

#Obtención de los datos para el Hashtag TráficoGT
Se utilizaron las librerías *TwitterR* y *ROAuth* para la obtención de los datos y análisis. Se tomó la decisión de utilizar el $#TraficoGt$, con ayuda de las librerias importadas se buscaron los tweets y se creó un data frame a partir de los resultados obtenidos. 
```{r pressure, echo=FALSE}
search.string <- "#TraficoGT"
result.term <- searchTwitter(search.string, n = 100)
head(result.term)

#Se almacena todo en un Data Frame

dataTweets<- twListToDF(result.term)
write.csv(dataTweets, "tweets.csv")
```


# Limpieza y preprocesamiento
```{r}
setwd("/Users/odalisrg/Downloads/Laboratorio7DS")
tweets <- read_csv("tweets_aux.csv")
class(tweets)

corpus.tweet <- Corpus(VectorSource(tweets))

# Limpieza
corpus.tweet <- tm_map(corpus.tweet, content_transformer(tolower))
corpus.tweet <- tm_map(corpus.tweet, content_transformer(removeNumbers))
corpus.tweet <- tm_map(corpus.tweet, content_transformer(removePunctuation))
corpus.tweet <- tm_map(corpus.tweet, stripWhitespace)
corpus.tweet <- tm_map(corpus.tweet, removeWords,stopwords(kind="es"))

```






